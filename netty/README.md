
# Netty权威指南笔记
## 分隔符和定长解码器的应用

-   TCP以流的方式进行数据传输，上层的应用协议为了对消息进行区分，往往采用如下4中方式

    - (1) 消息长度固定，累计读取到长度总和为定长LEN的报文后，就认为读取到了一个完成的消息；将计数器置位 ，
    重新开始读取下一个数据报；
    - (2) 将回车换行符作为消息结束符，例如FTP，这种方式在文本协议中应用比较广泛；
    - (3) 将特殊的分隔符作为消息的结束标志，回车换行符就是一种特殊的结束分隔符；--- DelimiterBasedFrameDecoder
    - (4) 通过在消息头中定义长度字段来表示消息的总长度。
    
 - 从性能角度考虑，为了防止频繁地唤醒Selector 进行消息发送，Netty 的write 方法并不直接将消息写入SocketChannel，调用write 方法只是把待发送的消息放到发送缓冲数组中，再调用flush 方法，将发送缓冲区中的消息全部写到SocketChannel中
   
 
